sequenceDiagram
    participant Caller as ğŸ“ Caller
    participant Phone as Twilio<br/>Phone System
    participant System as Voicemail<br/>System
    participant Email as ğŸ“§ Email
    participant Staff as ğŸ‘¤ Staff Member
    participant Dashboard as ğŸ–¥ï¸ Web<br/>Dashboard

    Note over Caller,Phone: Customer Leaves Message

    Caller->>Phone: Calls theater number
    Phone->>Caller: "Please leave a message<br/>after the beep"
    Phone->>Phone: ğŸ”´ Recording...
    Caller->>Phone: Speaks message<br/>(up to 3 minutes)
    Caller->>Phone: Presses * key<br/>or hangs up

    Note over Phone,System: System Processes Recording

    Phone->>System: Save recording +<br/>start transcription
    System->>System: Store in database

    Note over System,Staff: Immediate Notification

    System->>Email: Send Email 1:<br/>"New Voicemail"
    Email->>Staff: ğŸ“§ Immediate email<br/>âœ“ Caller number<br/>âœ“ Duration<br/>âœ“ Recording link<br/>â³ Transcription pending

    Note over Phone,System: Transcription Processing (30s - 5 min)

    Phone->>Phone: AI transcribes audio...

    alt Transcription Succeeds
        Phone->>System: âœ… Transcription complete
        System->>Email: Send Email 2:<br/>"Transcription Ready"
        Email->>Staff: ğŸ“§ Follow-up email<br/>âœ“ Full transcription text
    else Transcription Fails
        Phone->>System: âŒ Transcription failed
        Note over System,Email: No second email sent
    end

    Note over Staff,Dashboard: Staff Reviews Voicemail

    Staff->>Dashboard: Log into dashboard
    Dashboard->>System: Get voicemails
    System->>Dashboard: Return list
    Dashboard->>Staff: Show voicemail cards

    alt Read Transcription
        Staff->>Staff: ğŸ“ Read transcription text
    else Listen to Audio
        Staff->>Dashboard: Click "Listen"
        Dashboard->>Phone: Request recording
        Phone->>Staff: ğŸ§ Stream audio
    end

    Note over Staff,Dashboard: Staff Takes Action

    alt Follow Up Needed
        Staff->>Staff: Note phone number
        Staff->>Caller: Call customer back
    else Complete
        Staff->>Dashboard: Delete voicemail
        Dashboard->>System: Remove from database
    end

    Note over Caller,Dashboard: Complete workflow from call to resolution
